---

# ------------------------------------------------------------------------------
# General Properties
# ------------------------------------------------------------------------------
id: "twilio"                           # Unique identifier of the tap
name: "Twilio"                         # Name of the tap
type: "tap-twilio"                     # !! THIS SHOULD NOT CHANGE !!
owner: "somebody@foo.com"              # Data owner to contact
#send_alert: False                     # Optional: Disable all configured alerts on this tap


# ------------------------------------------------------------------------------
# Source (Tap) - Twilio connection details
# ------------------------------------------------------------------------------
db_conn:
  account_sid: <TWILIO_ACCOUNT_SID>         # Twilio Account SID
  auth_token: <TWILIO_AUTH_TOKEN>           # Twilio Auth token
  start_date: "2020-10-01"                  # The default value to use if no bookmark exists for an endpoint
  date_window_size: 30                      # Number of days for date window looping through transactional endpoints
                                            # with from_date and to_date. Default date_window_size is 30 days.
                                            # Clients with large volumes of events may want to decrease this to 14, 7,
                                            # or even down to 1-2 days.
  attribution_window: 1                     # Latency minimum number of days to look-back to account for delays in
                                            # attributing accurate results. Default attribution window is 5 days.
  project_timezone: "Europe/London"         # Time zone in which integer date times are stored. The project timezone
                                            # may be found in the project settings in the Mixpanel console.
  user_agent: "someone"                     # Optional: Process and email for API logging purposes.
  #denest_properties: "false"               # Optional: Do not denest JSON responses in `export` and `engage` streams
                                            # to avoid very wide tables. If denesting is disabled then responses are
                                            # loaded into one JSON column in the target.
                                            # Default denest_properties is false.

  #export_events:                           # Optional: List of event names to export
  #  - event_one
  #  - event_two


# ------------------------------------------------------------------------------
# Destination (Target) - Target properties
# Connection details should be in the relevant target YAML file
# ------------------------------------------------------------------------------
target: "postgres_dwh"                         # ID of the target connector where the data will be loaded
batch_size_rows: 20000                     # Batch size for the stream to optimise load performance
stream_buffer_size: 0                      # In-memory buffer size (MB) between taps and targets for asynchronous data pipes
default_target_schema: "twilio"            # Target schema where the data will be loaded
#default_target_schema_select_permission:  # Optional: Grant SELECT on schema and tables that created
#  - grp_power


# ------------------------------------------------------------------------------
# Source to target Schema mapping
# ------------------------------------------------------------------------------
schemas:

  - source_schema: "twilio"             # This is mandatory, but can be anything in this tap type
    target_schema: "twilio"             # Target schema in the destination Data Warehouse
    target_schema_select_permissions:   # Optional: Grant SELECT on schema and tables that created
      - grp_stats

    # List of Twilio tables to load into destination Data Warehouse
    # Tap-Twilio will use the best incremental strategies automatically to replicate data
    tables:
      # Incrementally loaded tables
      # TaskRouter resources
      - table_name: "workspaces"
      - table_name: "activities"
      - table_name: "events"
      - table_name: "tasks"
      - table_name: "task_channels"
      - table_name: "task_queues"
      - table_name: "workers"
      - table_name: "workflows"
      # Programmable Chat resources
      - table_name: "services"
      - table_name: "roles"
      - table_name: "chat_channels"
      - table_name: "users"


      # Tables that cannot load incrementally and will use FULL_TABLE method
      # TaskRouter resources
      - table_name: "cumulative_statistics"
      - table_name: "channels"
      # Programmable Chat resources
      - table_name: "members"
      - table_name: "chat_messages"


        # OPTIONAL: Load time transformations - you can add it to any table
        #transformations:
        #  - column: "some_column_to_transform" # Column to transform
        #    type: "SET-NULL"                   # Transformation type
