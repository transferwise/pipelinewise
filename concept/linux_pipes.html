

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Linux Pipes in PipelineWise &mdash; PipelineWise  documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../_static/pipelinewise.png"/>
  

  
  
    <link rel="canonical" href="https://docs.ansible.com/ansible/latest/concept/linux_pipes.html"/>
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="YAML configuration" href="../user_guide/yaml_config.html" />
    <link rel="prev" title="Fast Sync" href="fastsync.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> PipelineWise
          

          
          </a>

          
            
            
              <div class="version">
                0.32.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Installation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../installation_guide/installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation_guide/creating_pipelines.html">Creating Pipelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation_guide/running_pipelines.html">Running Pipelines</a></li>
</ul>
<p class="caption"><span class="caption-text">Concept</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="singer.html">Singer.io</a></li>
<li class="toctree-l1"><a class="reference internal" href="replication_methods.html">Replication Methods</a></li>
<li class="toctree-l1"><a class="reference internal" href="fastsync.html">Fast Sync</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Linux Pipes in PipelineWise</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#logic">Logic</a></li>
<li class="toctree-l2"><a class="reference internal" href="#increasing-buffer-size">Increasing buffer size</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Using PipelineWise</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/yaml_config.html">YAML configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/encrypting_passwords.html">Encrypting Passwords</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/cli.html">Command Line Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/scheduling.html">Scheduling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/scheduling.html#multi-server-cluster">Multi-Server Cluster</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/metadata_columns.html">Metadata Columns</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/schema_changes.html">Schema Changes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/transformations.html">Transformations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/logging.html">Logging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/alerts.html">Alerts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/resync.html">Resync Tables</a></li>
</ul>
<p class="caption"><span class="caption-text">Connectors</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../connectors/taps.html">Taps (Data Sources)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../connectors/taps.html#configuring-taps">Configuring taps</a></li>
<li class="toctree-l1"><a class="reference internal" href="../connectors/targets.html">Targets (Destinations)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../connectors/targets.html#configuring-the-targets">Configuring the targets</a></li>
</ul>
<p class="caption"><span class="caption-text">Project</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../project/contribution.html">Contribution</a></li>
<li class="toctree-l1"><a class="reference internal" href="../project/about.html">Project</a></li>
<li class="toctree-l1"><a class="reference internal" href="../project/licenses.html">Licenses</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">PipelineWise</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Linux Pipes in PipelineWise</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/concept/linux_pipes.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="linux-pipes-in-pipelinewise">
<span id="linux-pipes"></span><h1>Linux Pipes in PipelineWise<a class="headerlink" href="#linux-pipes-in-pipelinewise" title="Permalink to this headline">¶</a></h1>
<p>A pipe is unidirectional interprocess communication channel. The term was coined by
<a class="reference external" href="https://en.wikipedia.org/wiki/Douglas_McIlroy">Douglas McIlroy</a> for Unix shell and
named by analogy with the pipeline.</p>
<p>Pipes are most often used in shell-scripts to connect multiple commands by redirecting the output of
one command (stdout) to the input (stdin) followed by using a pipe symbol ‘<cite>|</cite>’. <a class="reference internal" href="singer.html#singer"><span class="std std-ref">Singer.io</span></a> specification,
hence PipelineWise is also using linux pipes to connect <a class="reference internal" href="../connectors/taps.html#taps-list"><span class="std std-ref">Taps (Data Sources)</span></a> and <a class="reference internal" href="../connectors/targets.html#targets-list"><span class="std std-ref">Targets (Destinations)</span></a> connectors.</p>
<p>For example in the following command <code class="docutils literal notranslate"><span class="pre">tap-postgres</span></code> Extracts data from a postgres database and the
extracted data sent to <code class="docutils literal notranslate"><span class="pre">target-snowflake</span></code> to Load it into a Snowflake database:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>tap-postgres <span class="p">|</span> target-snowflake
</pre></div>
</div>
<div class="section" id="logic">
<h2>Logic<a class="headerlink" href="#logic" title="Permalink to this headline">¶</a></h2>
<p>Pipes provide asynchronous execution of commands using buffered I/O routines. Thus, all the commands
in the pipeline operate in parallel, each in its own process.</p>
<p>The size of the buffer since kernel version 2.6.11 is 65536 bytes (64K) and is equal to the page memory
in older kernels. When attempting to read from an empty buffer, the read process is blocked until data
appears. Similarly, if you attempt to write to a full buffer, the recording process will be blocked until
the necessary amount of space is available.</p>
<p>It is important to note, that despite the fact that pipes operates using file descriptor I/O streams,
operations are performed in memory without loading to/from the disc.</p>
<p>All the information given below is for bash shell 4.2 and kernel 3.10.10. Further details in the
original <a class="reference external" href="https://blog.dataart.com/linux-pipes-tips-tricks">Linux Pipes Tips &amp; Tricks</a> post.</p>
</div>
<div class="section" id="increasing-buffer-size">
<h2>Increasing buffer size<a class="headerlink" href="#increasing-buffer-size" title="Permalink to this headline">¶</a></h2>
<p>Sometimes the default 64K buffer size that provided by the Linux kernel is too small. For example in the
example above when you extracting data from a busy postgres database and loading into a busy Snowflake
database sometimes you will find that that <code class="docutils literal notranslate"><span class="pre">tap-postgres</span></code> is blocked by <code class="docutils literal notranslate"><span class="pre">target-snowflake</span></code>.</p>
<p>This happens when the target cannot load the data fast enough. For example if you have lot of concurrent
queries in the target database the database can queue up new queries (at least in case of a Snowflake database)
and this is blocking the tap to extract more data. This scenario can cause unexpected timeout in
<code class="docutils literal notranslate"><span class="pre">tap-postgres</span></code> and other tap connectors. To avoid this scenario you can consider to increase the buffer size
between the tap and target.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>PipelineWise doesn’t modify the kernel buffer size. When you need more buffer than
the defualt 64K that’s provided by the kernel, PipelineWise will use its own
buffering mechanism between taps and targets.</p>
<p>PipelineWise is using <a class="reference external" href="https://www.maier-komor.de/mbuffer.html">mbuffer</a> to
create custom sized buffer between taps and targets.</p>
</div>
<p>You can set custom buffer sizes in the tap YAML files by setting the <code class="docutils literal notranslate"><span class="pre">stream_buffer_size</span></code>
value. If <code class="docutils literal notranslate"><span class="pre">stream_buffer_size</span></code> is greater than 0 then the following piped command will be
generated to create larger buffer between taps and targets than the default
buffer that’s provided by the Linux kernel:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>tap-postgres <span class="p">|</span> mbuffer -m 10M <span class="p">|</span> target-snowflake
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="../user_guide/yaml_config.html" class="btn btn-neutral float-right" title="YAML configuration" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="fastsync.html" class="btn btn-neutral float-left" title="Fast Sync" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, Wise Ltd..

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>