

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Tap S3 CSV &mdash; PipelineWise  documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/custom.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../../_static/pipelinewise.png"/>
  

  
  
    <link rel="canonical" href="https://docs.ansible.com/ansible/latest/connectors/taps/s3_csv.html"/>
  

  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Tap Kafka" href="kafka.html" />
    <link rel="prev" title="Tap Oracle" href="oracle.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> PipelineWise
          

          
          </a>

          
            
            
              <div class="version">
                0.30.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Installation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../installation_guide/installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installation_guide/creating_pipelines.html">Creating Pipelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installation_guide/running_pipelines.html">Running Pipelines</a></li>
</ul>
<p class="caption"><span class="caption-text">Concept</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../concept/singer.html">Singer.io</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../concept/replication_methods.html">Replication Methods</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../concept/fastsync.html">Fast Sync</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../concept/linux_pipes.html">Linux Pipes in PipelineWise</a></li>
</ul>
<p class="caption"><span class="caption-text">Using PipelineWise</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../user_guide/yaml_config.html">YAML configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../user_guide/encrypting_passwords.html">Encrypting Passwords</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../user_guide/cli.html">Command Line Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../user_guide/scheduling.html">Scheduling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../user_guide/scheduling.html#multi-server-cluster">Multi-Server Cluster</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../user_guide/metadata_columns.html">Metadata Columns</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../user_guide/schema_changes.html">Schema Changes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../user_guide/transformations.html">Transformations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../user_guide/logging.html">Logging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../user_guide/alerts.html">Alerts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../user_guide/resync.html">Resync Tables</a></li>
</ul>
<p class="caption"><span class="caption-text">Connectors</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../taps.html">Taps (Data Sources)</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../taps.html#configuring-taps">Configuring taps</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="mysql.html">Tap MySQL</a></li>
<li class="toctree-l2"><a class="reference internal" href="postgres.html">Tap PostgreSQL</a></li>
<li class="toctree-l2"><a class="reference internal" href="oracle.html">Tap Oracle</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Tap S3 CSV</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#configuring-what-to-replicate">Configuring what to replicate</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="kafka.html">Tap Kafka</a></li>
<li class="toctree-l2"><a class="reference internal" href="snowflake.html">Tap Snowflake</a></li>
<li class="toctree-l2"><a class="reference internal" href="mongodb.html">Tap MongoDB</a></li>
<li class="toctree-l2"><a class="reference internal" href="salesforce.html">Tap Salesforce</a></li>
<li class="toctree-l2"><a class="reference internal" href="zendesk.html">Tap Zendesk</a></li>
<li class="toctree-l2"><a class="reference internal" href="jira.html">Tap Jira</a></li>
<li class="toctree-l2"><a class="reference internal" href="zuora.html">Tap Zuora</a></li>
<li class="toctree-l2"><a class="reference internal" href="google_analytics.html">Tap Google Analytics</a></li>
<li class="toctree-l2"><a class="reference internal" href="github.html">Tap Github</a></li>
<li class="toctree-l2"><a class="reference internal" href="shopify.html">Tap Shopify</a></li>
<li class="toctree-l2"><a class="reference internal" href="slack.html">Tap Slack</a></li>
<li class="toctree-l2"><a class="reference internal" href="mixpanel.html">Tap Mixpanel</a></li>
<li class="toctree-l2"><a class="reference internal" href="twilio.html">Tap Twilio</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../targets.html">Targets (Destinations)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../targets.html#configuring-the-targets">Configuring the targets</a></li>
</ul>
<p class="caption"><span class="caption-text">Project</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../project/contribution.html">Contribution</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../project/about.html">Project</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../project/licenses.html">Licenses</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">PipelineWise</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../taps.html">Taps (Data Sources)</a> &raquo;</li>
        
      <li>Tap S3 CSV</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../_sources/connectors/taps/s3_csv.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="tap-s3-csv">
<span id="id1"></span><h1>Tap S3 CSV<a class="headerlink" href="#tap-s3-csv" title="Permalink to this headline">¶</a></h1>
<p>Extracting data from S3 in CSV file format is straightforward. You need to have
access to an S3 bucket and the tap will download every file that matches the
configured file pattern. It’s tracking the <code class="docutils literal notranslate"><span class="pre">Last-Modified</span></code> timestamp on the
S3 objects to incrementally download only the new or updated files.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><strong>Authentication Methods</strong></p>
<blockquote>
<div><ul>
<li><p><strong>Profile based authentication</strong>: This is the default authentication method. Credentials taken from
the <code class="docutils literal notranslate"><span class="pre">default</span></code> AWS profile, that’s available on the host where PipelineWise is running.
To use anoter profile set the <code class="docutils literal notranslate"><span class="pre">aws_profile</span></code> parameter.</p></li>
<li><p><strong>Non-profile based authentication</strong>: To provide fixed credentials set <code class="docutils literal notranslate"><span class="pre">aws_access_key_id</span></code>,
<code class="docutils literal notranslate"><span class="pre">aws_secret_access_key</span></code> and optionally the <code class="docutils literal notranslate"><span class="pre">aws_session_token</span></code> parameters.</p>
<p>Optionally the credentials can be vault-encrypted in the YAML. Please check <a class="reference internal" href="../../user_guide/encrypting_passwords.html#encrypting-passwords"><span class="std std-ref">Encrypting Passwords</span></a>
for further details.</p>
</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="configuring-what-to-replicate">
<h2>Configuring what to replicate<a class="headerlink" href="#configuring-what-to-replicate" title="Permalink to this headline">¶</a></h2>
<p>PipelineWise configures every tap with a common structured YAML file format.
A sample YAML for S3 CSV replication can be generated into a project directory by
following the steps in the <a class="reference internal" href="../../installation_guide/creating_pipelines.html#generating-pipelines"><span class="std std-ref">Generating Sample Pipelines</span></a> section.</p>
<p>Example YAML for <code class="docutils literal notranslate"><span class="pre">tap-s3-csv</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>---

<span class="c1"># ------------------------------------------------------------------------------</span>
<span class="c1"># General Properties</span>
<span class="c1"># ------------------------------------------------------------------------------</span>
id: <span class="s2">&quot;csv_on_s3&quot;</span>                        <span class="c1"># Unique identifier of the tap</span>
name: <span class="s2">&quot;Sample CSV files on S3&quot;</span>          <span class="c1"># Name of the tap</span>
type: <span class="s2">&quot;tap-s3-csv&quot;</span>                     <span class="c1"># !! THIS SHOULD NOT CHANGE !!</span>
owner: <span class="s2">&quot;somebody@foo.com&quot;</span>              <span class="c1"># Data owner to contact</span>
<span class="c1">#send_alert: False                     # Optional: Disable all configured alerts on this tap</span>


<span class="c1"># ------------------------------------------------------------------------------</span>
<span class="c1"># Source (Tap) - S3 connection details</span>
<span class="c1"># ------------------------------------------------------------------------------</span>
db_conn:
  <span class="c1"># Profile based authentication</span>
  aws_profile: <span class="s2">&quot;&lt;AWS_PROFILE&gt;&quot;</span>                  <span class="c1"># AWS profile name, if not provided, the AWS_PROFILE environment variable or the &#39;default&#39; profile will be used</span>

  <span class="c1"># Non-profile based authentication</span>
  <span class="c1">#aws_access_key_id: &quot;&lt;ACCESS_KEY&gt;&quot;            # Plain string or vault encrypted. Required for non-profile based auth. If not provided, AWS_ACCESS_KEY_ID environment variable will be used.</span>
  <span class="c1">#aws_secret_access_key: &quot;&lt;SECRET_ACCESS_KEY&quot;  # Plain string or vault encrypted. Required for non-profile based auth. If not provided, AWS_SECRET_ACCESS_KEY environment variable will be used.</span>
  <span class="c1">#aws_session_token: &quot;&lt;AWS_SESSION_TOKEN&gt;&quot;     # Optional: Plain string or vault encrypted. If not provided, AWS_SESSION_TOKEN environment variable will be used.</span>

  <span class="c1">#aws_endpoint_url: &quot;&lt;FULL_ENDPOINT_URL&gt;&quot;      # Optional: for non AWS S3, for example https://nyc3.digitaloceanspaces.com</span>

  bucket: <span class="s2">&quot;my-bucket&quot;</span>                           <span class="c1"># S3 Bucket name</span>
  start_date: <span class="s2">&quot;2000-01-01&quot;</span>                      <span class="c1"># File before this data will be excluded</span>
  fastsync_parallelism: &lt;int&gt;                   <span class="c1"># Optional: size of multiprocessing pool used by FastSync</span>
                                                <span class="c1">#           Min: 1</span>
                                                <span class="c1">#           Default: number of CPU cores</span>

<span class="c1"># ------------------------------------------------------------------------------</span>
<span class="c1"># Destination (Target) - Target properties</span>
<span class="c1"># Connection details should be in the relevant target YAML file</span>
<span class="c1"># ------------------------------------------------------------------------------</span>
target: <span class="s2">&quot;snowflake&quot;</span>                       <span class="c1"># ID of the target connector where the data will be loaded</span>
batch_size_rows: <span class="m">20000</span>                    <span class="c1"># Batch size for the stream to optimise load performance</span>
stream_buffer_size: <span class="m">0</span>                     <span class="c1"># In-memory buffer size (MB) between taps and targets for asynchronous data pipes</span>
default_target_schema: <span class="s2">&quot;s3_feeds&quot;</span>         <span class="c1"># Target schema where the data will be loaded</span>
default_target_schema_select_permission:  <span class="c1"># Optional: Grant SELECT on schema and tables that created</span>
  - grp_power
<span class="c1"># primary_key_required: False             # Optional: in case you want to load tables without key</span>
                                          <span class="c1">#            properties, uncomment this. Please note</span>
                                          <span class="c1">#            that files without primary keys will not</span>
                                          <span class="c1">#            be de-duplicated and could cause</span>
                                          <span class="c1">#            duplicates. Always try selecting</span>
                                          <span class="c1">#            a reasonable key from the CSV file</span>


<span class="c1"># ------------------------------------------------------------------------------</span>
<span class="c1"># Source to target Schema mapping</span>
<span class="c1"># ------------------------------------------------------------------------------</span>
schemas:
  - source_schema: <span class="s2">&quot;s3_feeds&quot;</span> <span class="c1"># This is mandatory, but can be anything in this tap type</span>
    target_schema: <span class="s2">&quot;s3_feeds&quot;</span> <span class="c1"># Target schema in the destination Data Warehouse</span>

    <span class="c1"># List of CSV files to destination tables</span>
    tables:

      <span class="c1"># Every file in S3 bucket that matches the search pattern will be loaded into this table</span>
      - table_name: <span class="s2">&quot;feed_file_one&quot;</span>
        s3_csv_mapping:
          search_pattern: <span class="s2">&quot;^feed_file_one_.*.csv</span>$<span class="s2">&quot;</span> <span class="c1"># Required.</span>
          search_prefix: <span class="s2">&quot;&quot;</span>                        <span class="c1"># Optional</span>
          key_properties: <span class="o">[</span><span class="s2">&quot;id&quot;</span><span class="o">]</span>                   <span class="c1"># Optional</span>
          delimiter: <span class="s2">&quot;,&quot;</span>                           <span class="c1"># Optional. Default: &#39;,&#39;</span>

        <span class="c1"># OPTIONAL: Load time transformations</span>
        <span class="c1">#transformations:</span>
        <span class="c1">#  - column: &quot;last_name&quot;            # Column to transform</span>
        <span class="c1">#    type: &quot;SET-NULL&quot;               # Transformation type</span>

      <span class="c1"># You can add as many tables as you need...</span>
      - table_name: <span class="s2">&quot;feed_file_two&quot;</span>
        s3_csv_mapping:
          search_pattern: <span class="s2">&quot;^feed_file_tow_.csv</span>$<span class="s2">&quot;</span>
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="kafka.html" class="btn btn-neutral float-right" title="Tap Kafka" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="oracle.html" class="btn btn-neutral float-left" title="Tap Oracle" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, TransferWise Ltd..

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>